# Story 2.1: Recipe List and Metadata Loading

## Status

Ready for Review

## Story

**As a** user,
**I want** to see a list of all available recipes in the sidebar,
**so that** I know what recipes are in my collection.

## Acceptance Criteria

1. Build process discovers all `.md` files in `/recipes` directory
2. Recipe metadata (title, tags, filename) extracted from all recipe files
3. Metadata bundled into a JSON manifest file during build
4. RecipeList component created to display recipe titles in sidebar
5. At least 3-5 sample recipes created for testing
6. Recipe list displays in sidebar with proper shadcn styling (Card or List components)
7. Recipe list is scrollable if content exceeds sidebar height
8. Unit tests verify metadata extraction from multiple recipe files
9. Component tests verify RecipeList renders all recipe titles

## Tasks / Subtasks

- [x] Create 5 sample recipe files in `/recipes` directory
- [x] Build Vite plugin to scan recipes and extract metadata
- [x] Create RecipeMetadata TypeScript interface
- [x] Generate JSON manifest from recipe frontmatter
- [x] Create RecipeList component with shadcn Card styling
- [x] Add ScrollArea support for overflow handling
- [x] Integrate RecipeList into Sidebar
- [x] Write unit tests for metadata extraction
- [x] Write component tests for RecipeList
- [x] Verify all tests pass and linting is clean

## Dev Notes

### Relevant Architecture Information

**Epic Context:**
- Epic 2 focuses on Recipe Discovery & Navigation
- This story establishes the foundation for browsing the recipe collection
- Prerequisite: Epic 1 stories must be completed (project setup, layout, markdown parsing)

**Data Flow:**
- Build time: Vite plugin/script scans `/recipes` directory
- Extract frontmatter metadata (title, tags) from each `.md` file
- Generate JSON manifest with array of recipe metadata objects
- Bundle manifest into application for runtime access

**Recipe Metadata Interface:**
```typescript
interface RecipeMetadata {
  filename: string;      // e.g., "chocolate-chip-cookies.md"
  slug: string;          // e.g., "chocolate-chip-cookies" (for routing)
  title: string;         // from frontmatter
  tags: string[];        // from frontmatter (comma-separated)
}
```

**Component Structure:**
```
RecipeList (sidebar component)
├── RecipeListItem (individual recipe in list)
└── Scrollable container (if content overflows)
```

**shadcn/ui Components to Use:**
- `Card` or custom list styling
- `ScrollArea` for scrollable list
- Typography components for recipe titles

**Sample Recipe Files:**
Create in `/recipes` directory with frontmatter:
```markdown
---
title: Chocolate Chip Cookies
tags: dessert, baking, quick
---

## Ingredients
...
```

### Testing

**Test Location:**
- `tests/utils/recipe-loader.test.ts` - Metadata extraction tests
- `tests/components/RecipeList.test.tsx` - Component tests

**Unit Tests:**
- Test metadata extraction from single recipe file
- Test metadata extraction from multiple recipe files
- Test handling of missing frontmatter
- Test tag parsing (comma-separated to array)

**Component Tests:**
- Test RecipeList renders correct number of items
- Test recipe titles display correctly
- Test scrollable behavior (if applicable)
- Test empty state (no recipes)

**Test Data:**
- Create mock recipe files in test fixtures
- Use sample frontmatter with various tag combinations

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-09 | 1.0 | Initial story creation from Epic 2 | John (PM) |

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)

### Implementation Summary
- Created 5 sample recipes (chocolate-chip-cookies, spaghetti-carbonara, greek-salad, banana-bread, chicken-stir-fry)
- Built Vite plugin (`vite-plugins/recipe-manifest.ts`) using virtual module pattern
- Plugin scans `/recipes` directory at build time and generates manifest
- Manifest includes filename, slug, title, and parsed tags for each recipe
- Created RecipeList component with RecipeListItem sub-component
- Used shadcn Card components with hover states
- Integrated manifest into App.tsx via `virtual:recipe-manifest` import
- All 36 tests passing (7 manifest tests, 6 component tests)

### File List
- `/recipes/chocolate-chip-cookies.md` (existing)
- `/recipes/spaghetti-carbonara.md` (new)
- `/recipes/greek-salad.md` (new)
- `/recipes/banana-bread.md` (new)
- `/recipes/chicken-stir-fry.md` (new)
- `/vite-plugins/recipe-manifest.ts` (new)
- `/src/components/recipe/RecipeList.tsx` (new)
- `/tests/utils/recipe-manifest.test.ts` (new)
- `/tests/components/RecipeList.test.tsx` (new)
- `/src/types/recipe.ts` (modified - updated RecipeMetadata interface)
- `/src/vite-env.d.ts` (modified - added virtual module declaration)
- `/vite.config.ts` (modified - added recipeManifestPlugin)
- `/vitest.config.ts` (modified - added recipeManifestPlugin)
- `/src/App.tsx` (modified - integrated RecipeList)

### Debug Log References
None

### Completion Notes
- All acceptance criteria met
- Recipe list displays 5 recipes sorted alphabetically by title
- Tags displayed as badges for each recipe
- Component properly handles empty state
- Manifest generation supports comma-separated tags in frontmatter
- Virtual module pattern ensures manifest updates on recipe changes during dev

### Change Log
N/A - Implementation changes tracked in main Change Log

## QA Results

_To be populated by QA agent_
